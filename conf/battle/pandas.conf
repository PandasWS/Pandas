//--------------------------------------------------------------
// 熊猫模拟器战斗配置选项
// 最初的翻译由 Peter Kieser <pfak@telus.net> 完成
// 由 Ancyker 改写成纯英文, 由熊猫模拟器开发团队进行汉化
//--------------------------------------------------------------
//   开关选项: 可以用 on/off, yes/no 或 1/0 来表示开关
// 百分比选项: 填写 100 即表示 100%
//   掩码选项: 没有特殊说明的情况下, 默认用来表示游戏中各单位的类型
//             ------------------------------------
//             | 十六进制  |  十进制  |  对应单位 |
//             | 0x001     |  1       |  玩家     |
//             | 0x002     |  2       |  魔物     |
//             | 0x004     |  4       |  宠物     |
//             | 0x008     |  8       |  生命体   |
//             | 0x010     |  16      |  佣兵     |
//             | 0x080     |  128     |  NPC      |
//             | 0x200     |  512     |  元素精灵 |
//             ------------------------------------
//             掩码选项一个数值可以表示里面有多个内容. 
//             例如: 若想表示玩家和宠物, 只需填写 5 即可 (1 + 4)
//             掩码选项支持的填写格式有两种: 分别是十六进制和十进制,
//             若您填写十六进制则需要用 0x 作为数值的开头
//--------------------------------------------------------------

// 是否强制触发 OnPCLoadMapEvent 事件? [开关选项]
// 
// 在一般情况下只有地图添加了 loadevent 标记之后,
// 玩家进入这张地图时才会自动触发 OnPCLoadMapEvent 事件.
// 
// 若启用此选项, 那么无论地图是否拥有 loadevent 标记,
// 都会触发 OnPCLoadMapEvent 事件.
// 
// 若禁用此选项, 那么必须显式的给地图赋予 loadevent 标记,
// 才会触发 OnPCLoadMapEvent 事件.
//
// 默认值为: no (不强制触发)
force_loadevent: no

// 通过哪些渠道获得的装备奖自动变成已鉴定? [掩码选项]
// 
//   &1: 使用 getgroupitem 脚本指令获得的装备
//   &2: 打死魔物, 魔物道具掉落到地上的装备
//   &4: 打死魔物, 掉落到玩家背包中的MVP奖励(装备)
//   &8: 使用“偷窃”技能偷到的装备
//  &16: 在完成任务的过程中, 通过任务系统获得的装备
//       详见 db/[pre-]re/quest_db.yml 的注释
//  &32: 通过 makeitem 系列指令在地面上直接创造出的装备
//  &64: 使用 getrandgroupitem 脚本指令获得的装备
// &128: 通过 getitem / getitembound 系列指令创造出的装备
// &256: 通过 rentitem 系列指令创造出的装备
// 
// 若想启用以上全部, 请直接填写 511 即可.
// 
// 默认值为: 0
force_identified: 0

// 乘坐商城坐骑时禁止使用哪些物品? [掩码选项]
//
//   &1: 禁用“治愈类物品”, 物品类型编号为 0
//   &2: 禁用“可用类物品”, 物品类型编号为 2
//   &4: 禁用“盔甲/披肩/鞋子/头饰/饰品等防具”, 物品类型编号为 4
//   &8: 禁用“武器”, 物品类型编号为 5
//  &16: 禁用“卡片类物品”, 物品类型编号为 6
//  &32: 禁用“箭矢类物品 (箭矢/子弹/其他)”, 物品类型编号为 10
//  &64: 禁用“延迟消耗类物品”, 物品类型编号为 11
// &128: 禁用“影子装备”, 物品类型编号为 12
// &256: 禁用“商城物品”, 物品类型编号为 18
//
// 当某种物品被禁止使用后,
// 从物品栏双击此类物品时什么事情都不会发生,
// 并且会在玩家的聊天栏中显示出 conf/msg_conf/map_msg_*.conf 
// 中消息编号为 3003 的提示信息. 
//
// 默认值为: 64 (禁用“延迟消耗类物品”)
cashmount_useitem_limit: 64

// 玩家在 PVP 地图上的最大攻速限制
// 这里是根据地图是否拥有 MF_PVP 标记来判断的.
//
// 若玩家根据 conf/player.conf 的 max_aspd、max_third_aspd、
// max_extended_aspd 计算出来的最大攻速比此选项的值更小,
// 则以更小的攻速限制为准.
// 
// 举个例子:
// 此选项设置为 191 而 max_aspd 选项的值为 190,
// 当玩家处于 PVP 地图时最大攻速将是 190 而不是 191,
// 因为 max_aspd 的限制 190 更小.
//
// 若地图同时启用了 PVP 和 GVG 的话, 以 GVG 的攻速限制优先.
// 该选项是一个全职业限制选项.
//
// 默认值为: 0 (无限制) / 最大值: 199
max_aspd_for_pvp: 0

// 玩家在 GVG 地图上的最大攻速限制
// 这里是根据地图是否拥有 MF_GVG/MF_GVG_TE 标记来判断的.
// 
// 公会城堡地图在开启 GVG 之前
// 是没有 MF_GVG/MF_GVG_TE 地图标记的,
// 因此在没有开启 GVG 的时候跑去公会城堡地图,
// 不会受到此选项的限制.
//
// 若玩家根据 conf/player.conf 的 max_aspd、max_third_aspd、
// max_extended_aspd 计算出来的最大攻速比此选项的值更小,
// 则以更小的攻速限制为准.
// 
// 举个例子:
// 此选项设置为 191 而 max_aspd 选项的值为 190,
// 当玩家处于 GVG 地图时最大攻速将是 190 而不是 191,
// 因为 max_aspd 的限制 190 更小.
//
// 若地图同时启用了 PVP 和 GVG 的话, 以 GVG 的攻速限制优先.
// 该选项是一个全职业限制选项.
//
// 默认值为: 0 (无限制) / 最大值: 199
max_aspd_for_gvg: 0

// 当没有权限的玩家执行了 GM 指令时的处理策略
// 
// 0 - 当做聊天消息发出去
// 1 - 给予无权提示, 不会将指令当做聊天信息
// 2 - 不给于提示, 也不会将指令当做聊天信息
//
// 若配置为 1, 则会在发送者的聊天栏中显示出
// conf/msg_conf/map_msg_*.conf 中消息编号为 3000 的信息.
//
// 只有玩家尝试执行的指令是存在的才会给出提示消息,
// 如果执行的是不存在的指令比如: @_@ 这样一个表情的话,
// 还是能够被正常当做聊天信息发出去的.
//
// 默认值为: 1
atcmd_no_permission: 1

// 当玩家使用挂机系列指令时,
// 处于哪些模式不会被魔物主动攻击? [掩码选项]
//
// &1: 离线挂机 (使用 @suspend 指令触发的挂机)
// &2: 离开模式 (使用 @afk 指令触发的挂机)
// &4: 普通模式 (使用 login 脚本指令触发的挂机)
//
// 默认值为: 3 (离线挂机 + 离开模式)
suspend_monsterignore: 3

// 当玩家使用挂机系列指令时,
// 处于哪些模式会自动回复私聊讯息? [掩码选项]
//
// &1: 使用 @suspend 指令触发的离线挂机
// &2: 使用 @afk 指令触发的离开模式 (AFK)
// &4: 使用 login 脚本指令触发的挂机
//
// 将采用 conf/msg_conf/map_msg_*.conf 中消息编号为
// 3111 ~ 3114 的信息进行自动回复.
//
// 默认值为: 2 (离开模式)
suspend_whisper_response: 2

// 使用离线挂机指令 (@suspend) 进入挂机状态时,
// 角色身体朝向哪个方位?
// 
// -1 = 保持原状
//
//  1 = 西北      0 = 正北      7 = 东北
//            ↖     |     ↗
//  2 = 正西  <-     +     ->   6 = 正东
//            ↙     |     ↘
//  3 = 西南      4 = 正南      5 = 东南
//  
// 默认值为: -1 (保持原状)
suspend_offline_bodydirection: -1

// 使用离线挂机指令 (@suspend) 进入挂机状态时,
// 角色头部朝向哪个方位?
//
// -1 = 保持原状
//  0 = 相对于身体朝向的正前方, 头部看向正前方
//  1 = 相对于身体朝向的正前方, 头部看向右看
//  2 = 相对于身体朝向的正前方, 头部看向左看
//
// 默认值为: -1 (保持原状)
suspend_offline_headdirection: -1

// 使用离线挂机指令 (@suspend) 进入挂机状态时,
// 角色处于哪种站立/坐下状态?
//
// -1 = 保持原状
//  0 = 站立
//  1 = 坐下
//
// 默认值为: -1 (保持原状)
suspend_offline_sitdown: -1

// 使用离开模式指令 (@afk) 进入挂机状态时,
// 角色身体朝向哪个方位?
// 
// -1 = 保持原状
//
//  1 = 西北      0 = 正北      7 = 东北
//            ↖     |     ↗
//  2 = 正西  <-     +     ->   6 = 正东
//            ↙     |     ↘
//  3 = 西南      4 = 正南      5 = 东南
// 
// 默认值为: -1 (保持原状)
suspend_afk_bodydirection: -1

// 使用离开模式指令 (@afk) 进入挂机状态时,
// 角色头部朝向哪个方位?
//
// -1 = 保持原状
//  0 = 相对于身体朝向的正前方, 头部看向正前方
//  1 = 相对于身体朝向的正前方, 头部看向右看
//  2 = 相对于身体朝向的正前方, 头部看向左看
//
// 默认值为: -1 (保持原状)
suspend_afk_headdirection: -1

// 使用离开模式指令 (@afk) 进入挂机状态时,
// 角色处于哪种站立/坐下状态?
//
// -1 = 保持原状
//  0 = 站立
//  1 = 坐下
// 
// 默认值为: 1 (坐下)
suspend_afk_sitdown: 1

// 使用离开模式指令 (@afk) 进入挂机状态时,
// 将角色的 "头饰上" 更换为哪一个指定的头饰外观编号?
//
// 提示: 若设置为 0 则不改变头饰外观
// 默认值为: 471 (AFK头饰)
suspend_afk_headtop_viewid: 471

// 使用 login 脚本指令将角色拉入普通挂机状态时,
// 角色身体朝向哪个方位?
// 
// -1 = 保持原状
//
//  1 = 西北      0 = 正北      7 = 东北
//            ↖     |     ↗
//  2 = 正西  <-     +     ->   6 = 正东
//            ↙     |     ↘
//  3 = 西南      4 = 正南      5 = 东南
//  
// 默认值为: -1 (保持原状)
suspend_normal_bodydirection: -1

// 使用 login 脚本指令将角色拉入普通挂机状态时,
// 角色头部朝向哪个方位?
//
// -1 = 保持原状
//  0 = 相对于身体朝向的正前方, 头部看向正前方
//  1 = 相对于身体朝向的正前方, 头部看向右看
//  2 = 相对于身体朝向的正前方, 头部看向左看
//
// 默认值为: -1 (保持原状)
suspend_normal_headdirection: -1

// 使用 login 脚本指令将角色拉入普通挂机状态时,
// 角色处于哪种站立/坐下状态?
//
// -1 = 保持原状
//  0 = 站立
//  1 = 坐下
//
// 默认值为: -1 (保持原状)
suspend_normal_sitdown: -1

// 多人召唤时是否避开在线摆摊玩家? [掩码选项]
// 
// 在 rAthena 默认设定中除非是离线挂店单位,
// 否则在线角色皆可以被召唤.
// 
// 但有时使用 @recallall 把在线摆摊的玩家全召唤走
// 也是非常麻烦的事情, 它会打乱玩家的站位.
//
// 在熊猫模拟器中您可以通过此选项设定对应的行为,
// 避免全多人召唤指令拉走摆摊单位.
//
//  0 = 可召唤在线摆摊玩家 (无论是采购还是出售摊位)
// &1 = 放弃召唤在线的出售摊位
// &2 = 放弃召唤在线的采购摊位
//
// 默认值为: 3 (放弃召唤在线的出售和采购摊位)
multiplayer_recall_behavior: 3

// 当任意魔物拥有, 且触发了自己的死亡标签后,
// 是否还会继续触发 OnNPCKillEvent 事件 [开关选项]
// 
// 0 = 不再触发 OnNPCKillEvent 事件
// 1 = 继续触发 OnNPCKillEvent 事件
// 
// 默认值为: 0 (不再触发)
always_trigger_npc_killevent: 0

// 当 MVP 魔物拥有, 且触发了自己的死亡标签后,
// 是否还会继续触发 OnPCKillMvpEvent 事件 [开关选项]
// 
// 0 = 不再触发 OnPCKillMvpEvent 事件
// 1 = 继续触发 OnPCKillMvpEvent 事件
//
// 由于 MVP 魔物也是众多魔物中的一种,
// 因此即便 MVP 魔物有自己的自定义死亡标签, 
// 死亡时也会根据 always_trigger_npc_killevent 的设置
// 决定是否触发 OnNPCKillEvent 事件,
// 完成 OnNPCKillEvent 事件后才会轮到 OnPCKillMvpEvent 事件.
// 
// 使用 OnPCKillMvpEvent 的时候请注意, 它与 OnNPCKillEvent 都
// 应该尽可能的少使用 mes 等需要等待用户输入的指令.
// 
// 因为系统需要先完成 OnNPCKillEvent 事件, 
// 若 OnNPCKillEvent 事件中有对话框需要用户确认或关闭,
// 就会导致 OnPCKillMvpEvent 被事件队列阻塞.
// 
// 默认值为: 1 (继续触发)
always_trigger_mvp_killevent: 1

// 哪些单位默认开启战斗记录 [掩码选项]
//
// 默认开启战斗记录的单位只要召唤出来就能记录输出和承伤情况,
// 而不必使用 enable_batrec 脚本指令来启用记录
//
// 默认值为: 542 (魔物 + 宠物 + 生命体 + 佣兵 + 元素精灵)
batrec_autoenabled_unit: 542

// 重发魔物死亡封包的间隔时间 (单位: 毫秒)
// 
// 用于解决视野范围内的怪物被近距离打死后,
// 客户端没有把它移除, 魔物以空血的的姿态卡在画面中的情况.
// 
// 魔物死亡后会发送 clif_clearunit_area 的 CLR_DEAD 给客户端,
// 但是由于复杂网络结构 (比如: 使用了转发\盾机\负载均衡) 
// 可能没有全链路开启 TCP_NODELAY 选项,
// 这会导致这个小封包粘在上一个封包中发出, 客户端无法解析它.
// 
// 最后客户端自认为没收到服务端的单位移除信号
// 而没有移除死亡单位.
// 
// 若启用此选项, 将在第一个魔物死亡封包发送之后
// 等待指定的时间间隔, 再由服务端补发一个死亡封包给客户端. 
//
// 但代价是每个魔物死亡之后都需要额外发送一个死亡封包,
// 这会加大网络开销, 请根据网络环境酌情开启.
// 
// 注意事项:
// 此选项的取值不能太大 (间隔不能太久),
// 否则一方面没意义, 另外一方面如果魔物由于其他机制
// 用相同的 GameID 复活, 则会导致它在画面中被错误的移除.
//
// 若需要开启此选项, 选项的取值建议可以从 16 毫秒开始,
// 每次增加 16 毫秒然后尝试一下效果.
// 
// 默认值为: 0 (不开启) / 最大值为: 1000
repeat_clearunit_interval: 0

// 魔物死亡封包将会发送给周围多少个格的玩家
//
// 用于解决视野范围边缘的怪物被击退技能打死后,
// 客户端没有把它移除, 魔物以空血的的姿态卡在画面中的情况.
//
// 比如当你召唤 100 个波利, 将视野用鼠标滚轮放大,
// 然后用暴风雪打距离屏幕边缘的怪物.
// 在技能读条完毕后立刻往反方向移动 (提前 @speed 1)
// 等暴风雪结束后回来观看, 较大概率会有魔物死亡但没被移除.
// 
// 造成这一现象的原因是:
// 当魔物死亡封包会发送给周围 AREA_SIZE 格子的玩家单位,
// 但如果你跑得太远 (或者魔物被击退的太远),
// 那么封包发送的时候你的角色已经不在死亡封包的发送范围内了.
// 
// 类似暴风雪这样的技能, 具有延迟伤害和击退, 
// 再叠加上第一只波利死亡后掉落的物品会吸引其他波利
// 靠近暴风雪的伤害区, 就很容易触发这一现象.
// 
// 此选项定义了一个死亡封包专用的广播范围,
// 在魔物死亡时将会往周围一个更大范围的区域发送死亡封包,
// 确保玩家通常都能够在覆盖范围内.
// 
// 注意事项:
// AREA_SIZE 对应 conf/battle/client.conf 的 area_size 选项,
// 但 area_size 选项控制的内容不止封包发送范围,
// 还包括了玩家移动的时候服务端会将玩家周围多少格范围内的
// 游戏单位(NPC、魔物、其他玩家) 发送给客户端.
// 因此不推荐通过调整它来缓解此问题, 否则会增加更多的网络开销.
//
// 设为 0 则表示使用两倍 AREA_SIZE 的值
// 
// 默认值为: 28 / 最大值为: 200
dead_area_size: 28

// 当"人孔/黑洞陷阱"地面陷阱被移除的时候,
// 是否同时使得已经被捕获的玩家从陷阱立即脱困? [开关选项]
//
// 在 rAthena 默认的设定中,
// 使用"元素领域"或"疯狂野草"等技能只能解除地面陷阱,
// 但是无法让已经被捕获的玩家立刻脱困.
//
// 但是根据 2018 年 TWRO 的演示视频以及常识,
// 在"人孔/黑洞陷阱"被解除时被捕获的玩家应该立刻脱困才正确.
// 因此设立此选项, 方便大家根据自己的需求灵活调整.
//
// 默认值为: yes (会立即脱困)
remove_manhole_with_status: yes

// 是否使新版客户端使用经典换行策略? [开关选项]
// 新版客户端是指 2021-11-03 及更新的客户端
// 
// 在新版客户端中如果 mes 显示的字符串以空格开头,
// 且上一行有位置可以放下这次显示的文本,
// 那么本次输出的文本将会被追加到上一行文本的末尾.
// 这可能会打乱很多脚本的精心排版.
//
// 详情可见:
// https://blog.pandas.ws/changes-of-mes-on-20211117-client/
//
// 注意事项:
// 此选项只能完美的处理 langtype = 3 (简体中文) 的环境情况,
// 在 langtype = 4 (繁体中文) 的情况下虽然能换行,
// 但是看起来会多一个空格导致错位, 可能是字体或者客户端针对
// langtype = 4 的处理逻辑差异导致.
//
// 若启用此选项,
// 熊猫模拟器将迫使 mes 指令继续遵循以前的换行策略.
// 
// 默认值为: yes (使用经典换行策略)
restore_mes_logic: yes

// 是否关闭加载物品数据库时的一些警告信息? [掩码选项]
//
// 警告通常都意味着风险,
// 但有的时候解决一个警告会意味着大量的劳动,
// 如果您真的知道自己关闭的警告隐含的风险可能会发生的话,
// 那么可以在这里直接屏蔽掉警告信息.
//
//  0 = 不屏蔽任何警告
//
// &1 = 当武器没有在 item_db 中指定 WeaponLevel 字段时
//      将其视为 1 级武器且屏蔽警告
//
// &2 = 当防具没有在 item_db 中指定 ArmorLevel  字段时
//      将其视为 1 级防具且屏蔽警告
//
// 默认值为: 0 (不屏蔽任何警告)
itemdb_warning_policy: 0

// 设置魔物默认的受伤动画时长 (单位为毫秒)
//
// 当魔物被攻击时受伤动画的默认播放时长, 值越小看起来越快
// 如果设置为 0 那么客户端可能会跳过播放受伤动画
//
// 若魔物在 mob_db 中没有设定 DamageMotion 字段时,
// 将采用此处设定的数值.
// 
// 将此选项设置为 1 可用于解决部分技能在
// 攻击 DamageMotion 为 0 的魔物时可能出现的异常:
// 
// - 无法正常播放攻击者的施法动作
//
//   - 用刀刃之舞 (SHC_DANCING_KNIFE) 打训练用龙蛋 (编号: 2411)
//     由于龙蛋的 DamageMotion 字段没被定义因此默认值是 0,
//     这会导致刀刃之舞的攻击动画出现异常.
//     通过将此选项的值改成 1, 攻击此类魔物就可以避免动画异常.
//
// - 发生了暴击但是伤害数字没有暴击的红色气泡
//
// 修改此选项之后必须使用 @reloadmobdb 指令进行重载才能生效.
//
// 默认值为: 0 (表示不开启, 开启的话建议设置为 1)
mob_default_damagemotion: 0

// 是否高优先级保存 setunitdata 对魔物的调整? [开关选项]
// 
// 使用 setunitdata 调整 UMOB_ATKMIN, UMOB_MATKMIN 等选项后,
// 当魔物发生能力重算时 (比如中了个负面状态) 会导致这些调整丢失,
// 而我们希望魔物在死亡之前都尊重我们的 setunitdata 调整.
//
// 举个例子:
// 召唤一只血量不至于被死亡投射技能秒杀的魔物,
// 并使用 setunitdata 将它的 UMOB_MAXHP 设置为 1000000,
// 随后使用 "魔物情报" 技能确认魔物的当前血量后, 
// 使用四转技能死亡投射 (AG_DEADLY_PROJECTION) 对该魔物使用,
// 会发现该魔物的的最大 HP 已经回到默认了.
// 
// 为此熊猫模拟器做了一些改动,
// 来确保你对魔物的 setunitdata 调整可以被高优先级保存下来, 
// 哪怕魔物出于各种原因进行了能力重算,
// 也会在重算之后立刻应用你之前对它的 setunitdata 调整.
//
// 默认值为: yes
mob_setunitdata_persistence: yes

// PYHELP - BATTLECONFIG - INSERT POINT - <Section 4>
